/*SIAKAD UNCP Js Config*/
/*==========================================*/
/*Dev		=> Muhammad Dicky Hidayat Latif*/
/*Email		=> muh.dickyhidayat@gmail.com*/
/*==========================================*/

var path=window.location.pathname,host=window.location.hostname;$(function(){$(window).resize(function(){$(window).width()>=520&&$(".login-box").css("width","490px"),$(window).width()<520&&$(".login-box").css("width",""),$(window).width()>=550&&$(".input-user,.input-pass").addClass("col-xs-6"),$(window).width()<550&&$(".input-user,.input-pass").removeClass("col-xs-6")}),$(window).width()>=520&&$(".login-box").css("width","490px"),$(window).width()<520&&$(".login-box").css("width",""),$(window).width()>=550&&$(".input-user,.input-pass").addClass("col-xs-6"),$(window).width()<550&&$(".input-user,.input-pass").removeClass("col-xs-6"),$("input").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}),$(".swal2-container").is(":visible")&&$(".swal2-container").addClass("style-2"),$(document).on("click","#login",function(a){if(a.preventDefault(),$(".has-error").removeClass("has-error"),""!=$("input[name=username]").val()&&""!=$("input[name=password]").val()){var s=$("#form-login").attr("action");if($("form#form-login").is(":visible"))n=$("#form-login").serialize();else var n={password:$("input#password").val()};$("#login").find("span").removeClass("fa-sign-in").addClass("fa-spinner fa-spin"),$(".log-in").removeClass("fa-arrow-right").addClass("fa-spinner fa-spin"),$.ajax(url_login+"/user/"+s,{dataType:"json",type:"POST",data:n,success:function(a){"failed"==a.status?($.each(a.errors,function(a,s){"Password kosong, tolong disi dengan benar"==s?($("input#password").focus(),$(".password-input").addClass("has-error")):("Username yang anda masukkan salah"==s||"Username kosong, isi dengan benar"==s?$(".username").addClass("has-error"):$(".username, .password-input").addClass("has-error"),$("input#username").focus().val(""),$("input#password").val("")),swal({title:"Login Gagal",text:s,type:"error",timer:2e3})}),$("#login").find("span").addClass("fa-sign-in").removeClass("fa-spinner fa-spin"),$(".log-in").addClass("fa-arrow-right").removeClass("fa-spinner fa-spin")):"success"==a.status&&("1"==a.active_status?(a.level,window.location.href=a.url_target,$("#login").find("span").addClass("fa-check").removeClass("fa-spinner fa-spin"),$(".log-in").addClass("fa-check").removeClass("fa-spinner fa-spin")):($("input#username").focus().val(""),$("input#password").val(""),swal({title:"Login Gagal",text:"Akun yang anda gunakan dinonaktifkan",type:"error",timer:2e3}),$("#login").find("span").addClass("fa-sign-in fa-spinner").removeClass("fa-spinner fa-spin"),$(".log-in").addClass("fa-arrow-right").removeClass("fa-spinner fa-spin")))},error:function(){swal({title:"Login Error",text:"Maaf, telah terjadi error pada server!",type:"error",timer:2e3}),$("#login").find("span").addClass("fa-sign-in").removeClass("fa-spinner fa-spin"),$(".log-in").addClass("fa-arrow-right").removeClass("fa-spinner fa-spin")}})}else{if(""==$("input[name=username]").val()){i="Username kosong, isi dengan benar";if($(".username").addClass("has-error"),$("input#username").focus().val(""),""==$("input[name=password]").val()){$(".password-input").addClass("has-error");i="Username dan password kosong, isi dengan benar"}}else if(""==$("input[name=password]").val()){var i="Password kosong, tolong disi dengan benar";$(".password-input").addClass("has-error"),$("input#password").focus().val("")}swal({title:"Login Gagal",text:i,type:"error",timer:2e3})}}),$(document).on("click",".close",function(){$("#alert-place").css("margin-bottom","0"),$(".login-box").css("margin","11% auto")})});