/*SIAKAD UNCP Js Config*/
/*==========================================*/
/*Dev		=> Muhammad Dicky Hidayat Latif*/
/*Email		=> muh.dickyhidayat@gmail.com*/
/*==========================================*/

function daftar_jadwal(a,t,e){if(collapse_box("#box-jadwal, #box-jadwal .box"),$("#box-jadwal").find("div.overlay").fadeIn(),1==a)l=5;else var l=9;$("table.tbl-data-jadwal tbody tr").length>0?$("table.tbl-data-jadwal").find("tbody").prepend('<tr class="table-load"><td class="text-center load-data" colspan="'+l+'">Memproses Data</td></tr>'):$("table.tbl-data-jadwal").find("tbody").html('<tr class="table-load"><td class="text-center load-data" colspan="'+l+'">Memproses Data</td></tr>'),getJSON_async("http://"+host+path_home+"/action/ambil",{data:"daftar_jadwal_ptk",d:a,thn:t,all:e},500).then(function(t){1==a&&$("#box-jadwal .box-title").html('<li class="fa fa-list"></li> Jadwal Mengajar Hari '+t.hari_i),""!=t.record_jadwal?($("table.tbl-data-jadwal").find("tbody").text(""),$("#box-jadwal .tahun-ajaran-jad").html('<li class="fa fa-book"></li> '+t.record_jadwal[0].thn_ajaran),$("#box-jadwal .jumlah-jadwal-jad").html('<li class="fa fa-list"></li> '+t.count_jadwal_ptk.count_ptk_jdl),$("#box-jadwal .jumlah-kls-jad").html('<li class="fa fa-building-o"></li> '+t.count_jadwal_ptk.count_ptk_kls),$.each(t.record_u,function(e,l){var s,i,n,d=1,r=1,o=1;$.each(t.record_kelas,function(e,c){if(1==o&&0==c.jenis_jdl||o==r&&0==c.jenis_jdl){m=' style="background-color:#f9f9f9;"';r++,r++}else var m="";l.jenis_jdl==c.jenis_jdl&&0==l.jenis_jdl?(s=c.semester+"/"+c.kelas,d=1,$.each(t.record_jadwal,function(t,e){if(null!=e.nama_mk&&""!=e.nama_mk||(e.nama_mk="-",e.jml_sks="-"),(i=e.semester+"/"+e.kelas)==s&&e.jenis_jdl==l.jenis_jdl){if(1!=a)var r='  <td class="text-center">'+e.hari_jdl+"</td>",o="  <td>"+e.nama_prodi+'</td>  <td class="text-center"><li class="fa fa-users" title="Jumlah mahasiswa kelas '+e.semester+"/"+e.kelas+'"></li> '+e.jml_mhs+' <li class="fa fa-male" title="Jumlah mahasiswa laki-laki kelas '+e.semester+"/"+e.kelas+'"></li> '+e.jml_lk+' <li class="fa fa-female" title="Jumlah mahasiswa perempuan kelas '+e.semester+"/"+e.kelas+'"></li> '+e.jml_pr+'</td>  <td class="text-center"><button class="btn btn-warning btn-sm view-kelas" value="'+e.jdl_in+'" title="Lihat daftar mahasiswa kelas '+e.semester+"/"+e.kelas+" mata kuliah "+e.nama_mk+'"><i class="fa fa-list"></i></button></td>';1==d?($("table.tbl-data-jadwal").find("tbody").append("<tr"+m+'>  <td rowspan="" class="kelas-row'+e.jdl_no+' text-center">'+e.semester+"/"+e.kelas+"</td>"+r+'  <td class="text-center">'+e.jam_mulai_jdl+" - "+e.jam_akhir_jdl+'</td>  <td class="text-center">'+e.ruang+"</td>  <td>"+e.nama_mk+'</td>  <td class="text-center">'+e.jml_sks+"</td>"+o+"</tr>"),n=e.jdl_no):$("table.tbl-data-jadwal").find("tbody").append("<tr"+m+">"+r+'  <td class="text-center">'+e.jam_mulai_jdl+" - "+e.jam_akhir_jdl+'</td>  <td class="text-center">'+e.ruang+"</td>  <td>"+e.nama_mk+'</td>  <td class="text-center">'+e.jml_sks+"</td>"+o+"</tr>"),d++}}),$("table.tbl-data-jadwal .kelas-row"+n).attr("rowspan",d-1),o++):0!=l.jenis_jdl&&(s=c.semester+"/"+c.kelas,$.each(t.record_jadwal,function(t,e){if(null!=e.nama_mk&&""!=e.nama_mk||(e.nama_mk="-",e.jml_sks="-"),(i=e.semester+"/"+e.kelas)==s&&e.jenis_jdl==l.jenis_jdl){if(1!=a)var n="9",r='  <td class="text-center">'+e.hari_jdl+"</td>",o="  <td>"+e.nama_prodi+'</td>  <td class="text-center"><li class="fa fa-users" title="Jumlah mahasiswa kelas '+e.semester+"/"+e.kelas+'"></li> '+e.jml_mhs+' <li class="fa fa-male" title="Jumlah mahasiswa laki-laki kelas '+e.semester+"/"+e.kelas+'"></li> '+e.jml_lk+' <li class="fa fa-female" title="Jumlah mahasiswa perempuan kelas '+e.semester+"/"+e.kelas+'"></li> '+e.jml_pr+'</td>  <td class="text-center"><button class="btn btn-warning btn-sm view-kelas" value="'+e.jdl_in+'" title="Lihat daftar mahasiswa kelas '+e.semester+"/"+e.kelas+" mata kuliah "+e.nama_mk+'"><i class="fa fa-list"></i></button></td>';else n="5";1==d?$("table.tbl-data-jadwal").find("tbody").append('<tr>  <td colspan="'+n+'" align="left"><b>Konsentrasi '+e.nm_konsentrasi+'</b></td></tr><tr>  <td rowspan="" class="text-center">'+e.semester+"/"+e.kelas+"</td>"+r+'  <td class="text-center">'+e.jam_mulai_jdl+" - "+e.jam_akhir_jdl+'</td>  <td class="text-center">'+e.ruang+"</td>  <td>"+e.nama_mk+'</td>  <td class="text-center">'+e.jml_sks+"</td>"+o+"</tr>"):$("table.tbl-data-jadwal").find("tbody").append('<tr>  <td rowspan="" class="text-center">'+e.semester+"/"+e.kelas+"</td>"+r+'  <td class="text-center">'+e.jam_mulai_jdl+" - "+e.jam_akhir_jdl+'</td>  <td class="text-center">'+e.ruang+"</td>  <td>"+e.nama_mk+'</td>  <td class="text-center">'+e.jml_sks+"</td>"+o+"</tr>"),d++}}))})})):"-"!=t.c_thn_ajaran?1==a?$("table.tbl-data-jadwal tbody").html('<tr><td colspan="5" align="center">Untuk hari ini anda tidak memiliki jadwal mengajar</td></tr>'):$("table.tbl-data-jadwal tbody").html('<tr><td colspan="9" align="center">Untuk tahun akademik ini anda tidak memiliki jadwal mengajar</td></tr>'):1==a?$("table.tbl-data-jadwal tbody").html('<tr><td colspan="5" align="center">Untuk saat ini tidak ada tahun akademik yang diterapkan</td></tr>'):$("table.tbl-data-jadwal tbody").html('<tr><td colspan="9" align="center">Untuk saat ini tidak ada tahun akademik yang diterapkan</td></tr>'),$("#box-jadwal").find("div.overlay").fadeOut(),$(".tamp-jadwal, .tamp-all-jadwal").find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-list")}).catch(function(a){$("#box-jadwal").find("div.overlay").fadeOut(),$(".tamp-jadwal, .tamp-all-jadwal").find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-list"),1==$("table.tbl-data-jadwal tbody tr.table-load").length&&$("table.tbl-data-jadwal tbody tr.table-load td").html("Terjadi kesalahan, <b>Error "+a.status+": "+a.statusText+"</b>"),setTimeout(function(){$("table.tbl-data-jadwal tbody tr.table-load").remove()},2e3)})}function daftar_kelas_mhs(a){$(".tbl-daftar-kelas-mhs").find("tbody").html('<tr><td colspan="6" align="center" class="load-data">Memproses Data</td></tr>'),$(".detail-kelas .detail-dt-kelas").text("-"),getJSON_async("http://"+host+path_home+"/action/ambil",{kelas:a,data:"daftar_kelas_mhs"},500).then(function(a){if(""!=a.record_kelas){$("#box-kelas-mhs .box-body").is(":visible")?($("#box-kelas-mhs").find("div.overlay").fadeIn(),delay(function(){$("#box-kelas-mhs").find("div.overlay").fadeOut(),$("html, body").animate({scrollTop:$("#box-kelas-mhs").offset().top-55},800)},500)):($("#box-kelas-mhs").fadeIn(),collapse_box("#box-kelas-mhs"),delay(function(){$("#box-kelas-mhs").find("div.overlay").fadeOut(),$("html, body").animate({scrollTop:$("#box-kelas-mhs").offset().top-55},800)},100));var t;if($.each(a.record_kelas,function(a,e){$.each(e,function(a,t){null!=t&&""!=t||(t="-"),$(".detail-kelas .detail-kelas-"+a).text(t)}),0!=e.jenis_jdl&&$(".detail-kelas .detail-kelas-nama_mk").text(e.nama_mk+" (Konsentrasi "+e.nm_konsentrasi+")"),t=e.status_jdl}),""!=a.record_mhs){$(".tbl-daftar-kelas-mhs").find("tbody").text("");var e,l=1;$.each(a.record_mhs,function(s,i){if("L"==i.jk)n="Laki-Laki";else var n="Perempuan";e=1==i.status_mhs_kls?'<td class="text-center">Aktif</td>':'<td class="text-center">Tidak Aktif</td>',1==t&&"ptk"==a.data_kelas&&(e=1==i.status_mhs_kls?'<td class="text-center"><input type="checkbox" class="check-status-mhs-kls status-mhs-'+i.id_kelas+'" checked value="'+i.id_kelas+'"/></td>':'<td class="text-center"><input type="checkbox" class="check-status-mhs-kls status-mhs-'+i.id_kelas+'" value="'+i.id_kelas+'"/></td>'),$("table.tbl-daftar-kelas-mhs").find("tbody").append('<tr>  <td class="text-center">'+l+'</td>  <td class="text-center">'+i.nisn+"</td>  <td>"+i.nama+'</td>  <td class="text-center">'+n+'</td>  <td class="text-center">'+i.tahun_angkatan+"</td>  "+e+"</tr>"),l++})}else $(".tbl-daftar-kelas-mhs").find("tbody").html('<tr><td colspan="6" align="center">Untuk sekarang kelas ini belum memiliki mahasiswa</td></tr>')}else swal({title:"Info",text:"Kelas yang anda pilih tidak terdaftar dalam database!",type:"info",timer:2e3});$(".check-status-mhs-kls").bootstrapToggle({on:'<i class="fa fa-check-circle"></i> Aktif',off:'<i class="fa fa-ban"></i> Tidak Aktif',size:"small",onstyle:"success",offstyle:"danger",width:100}),$(".view-kelas").find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-list")}).catch(function(a){$(".view-kelas").find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-list")})}function daftar_kls_d(a){collapse_box("#box-content, #box-content .box"),$("#box-content div.overlay").fadeIn(),$("table.tbl-data-jadwal tbody tr").length>0?$("table.tbl-data-jadwal").find("tbody").prepend('<tr class="table-load"><td class="text-center load-data" colspan="6">Memproses Data</td></tr>'):$("table.tbl-data-jadwal").find("tbody").html('<tr class="table-load"><td class="text-center load-data" colspan="6">Memproses Data</td></tr>'),getJSON_async("http://"+host+path_home+"/action/ambil",{data:"daftar_kls_ptk",thn:a},500).then(function(a){""!=a.record_jadwal?($("table.tbl-data-jadwal").find("tbody").text(""),$("#box-content .tahun-ajaran-jad").html('<li class="fa fa-book"></li> '+a.record_jadwal[0].thn_ajaran),$("#box-content .jumlah-jadwal-jad").html('<li class="fa fa-list"></li> '+a.count_jadwal_ptk.count_ptk_jdl),$("#box-content .jumlah-kls-jad").html('<li class="fa fa-building-o"></li> '+a.count_jadwal_ptk.count_ptk_kls),$.each(a.record_u,function(t,e){var l,s,i,n=1,d=1,r=1;$.each(a.record_kelas,function(t,o){if(1==r&&0==o.jenis_jdl||r==d&&0==o.jenis_jdl){c=' style="background-color:#f9f9f9;"';d++,d++}else var c="";e.jenis_jdl==o.jenis_jdl&&0==e.jenis_jdl?(l=o.semester+"/"+o.kelas,n=1,$.each(a.record_jadwal,function(a,t){if(null!=t.nama_mk&&""!=t.nama_mk||(t.nama_mk="-",t.jml_sks="-"),1==t.status_inp_nilai)d='  <td class="text-center"><button class="btn btn-info btn-sm view-nilai" value="'+t.jdl_in+'" title="Input nilai mahasiswa kelas '+t.semester+"/"+t.kelas+" mata kuliah "+t.nama_mk+'"><i class="fa fa-pencil-square"></i></button></td>';else var d='  <td class="text-center"><button class="btn btn-warning btn-sm view-nilai" value="'+t.jdl_in+'" title="Lihat nilai mahasiswa kelas '+t.semester+"/"+t.kelas+" mata kuliah "+t.nama_mk+'"><i class="fa fa-list"></i></button></td>';(s=t.semester+"/"+t.kelas)==l&&t.jenis_jdl==e.jenis_jdl&&(1==n?($("table.tbl-data-jadwal").find("tbody").append("<tr"+c+'>  <td rowspan="" class="kelas-row'+t.jdl_no+' text-center">'+t.semester+"/"+t.kelas+"</td>  <td>"+t.nama_mk+'</td>  <td class="text-center">'+t.jml_sks+"</td>  <td>"+t.nama_prodi+'</td>  <td class="text-center"><li class="fa fa-users" title="Jumlah mahasiswa kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_mhs+' <li class="fa fa-male" title="Jumlah mahasiswa laki-laki kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_lk+' <li class="fa fa-female" title="Jumlah mahasiswa perempuan kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_pr+"</td>"+d+"</tr>"),i=t.jdl_no):$("table.tbl-data-jadwal").find("tbody").append("<tr"+c+">  <td>"+t.nama_mk+'</td>  <td class="text-center">'+t.jml_sks+"</td>  <td>"+t.nama_prodi+'</td>  <td class="text-center"><li class="fa fa-users" title="Jumlah mahasiswa kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_mhs+' <li class="fa fa-male" title="Jumlah mahasiswa laki-laki kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_lk+' <li class="fa fa-female" title="Jumlah mahasiswa perempuan kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_pr+"</td>"+d+"</tr>"),n++)}),$("table.tbl-data-jadwal .kelas-row"+i).attr("rowspan",n-1),r++):0!=e.jenis_jdl&&(l=o.semester+"/"+o.kelas,$.each(a.record_jadwal,function(a,t){if(null!=t.nama_mk&&""!=t.nama_mk||(t.nama_mk="-",t.jml_sks="-"),1==t.status_inp_nilai)i='  <td class="text-center"><button class="btn btn-info btn-sm view-nilai" value="'+t.jdl_in+'" title="Input nilai mahasiswa kelas '+t.semester+"/"+t.kelas+" mata kuliah "+t.nama_mk+'"><i class="fa fa-pencil-square"></i></button></td>';else var i='  <td class="text-center"><button class="btn btn-warning btn-sm view-nilai" value="'+t.jdl_in+'" title="Lihat nilai mahasiswa kelas '+t.semester+"/"+t.kelas+" mata kuliah "+t.nama_mk+'"><i class="fa fa-list"></i></button></td>';(s=t.semester+"/"+t.kelas)==l&&t.jenis_jdl==e.jenis_jdl&&(1==n?$("table.tbl-data-jadwal").find("tbody").append('<tr>  <td colspan="6" align="left"><b>Konsentrasi '+t.nm_konsentrasi+'</b></td></tr><tr>  <td rowspan="" class="text-center">'+t.semester+"/"+t.kelas+"</td>  <td>"+t.nama_mk+'</td>  <td class="text-center">'+t.jml_sks+"</td>  <td>"+t.nama_prodi+'</td>  <td class="text-center"><li class="fa fa-users" title="Jumlah mahasiswa kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_mhs+' <li class="fa fa-male" title="Jumlah mahasiswa laki-laki kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_lk+' <li class="fa fa-female" title="Jumlah mahasiswa perempuan kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_pr+"</td>"+i+"</tr>"):$("table.tbl-data-jadwal").find("tbody").append('<tr>  <td rowspan="" class="text-center">'+t.semester+"/"+t.kelas+"</td>  <td>"+t.nama_mk+'</td>  <td class="text-center">'+t.jml_sks+"</td>  <td>"+t.nama_prodi+'</td>  <td class="text-center"><li class="fa fa-users" title="Jumlah mahasiswa kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_mhs+' <li class="fa fa-male" title="Jumlah mahasiswa laki-laki kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_lk+' <li class="fa fa-female" title="Jumlah mahasiswa perempuan kelas '+t.semester+"/"+t.kelas+'"></li> '+t.jml_pr+"</td>"+i+"</tr>"),n++)}))})})):"-"!=a.c_thn_ajaran?$("table.tbl-data-jadwal tbody").html('<tr><td colspan="6" align="center">Untuk tahun akademik ini anda tidak memiliki kelas didik</td></tr>'):$("table.tbl-data-jadwal tbody").html('<tr><td colspan="6" align="center">Untuk saat ini tidak ada tahun akademik yang diterapkan</td></tr>'),$(".tamp-kls").find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-list"),$("#box-kelas-mhs").slideUp(),$("#box-content").find("div.overlay").fadeOut()}).catch(function(a){$(".tamp-kls").find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-list"),$("#box-jadwal").find("div.overlay").fadeOut(),1==$("table.tbl-data-jadwal tbody tr.table-load").length&&$("table.tbl-data-jadwal tbody tr.table-load td").html("Terjadi kesalahan, <b>Error "+a.status+": "+a.statusText+"</b>"),setTimeout(function(){$("table.tbl-data-jadwal tbody tr.table-load").remove()},2e3)})}function view_nilai(a){$(".tbl-daftar-kelas-mhs").find("tbody").html('<tr><td colspan="5" align="center" class="load-data">Memproses Data</td></tr>'),$(".tbl-daftar-kelas-mhs .pdk-nilai").show(),$(".btn-input-nilai").text(""),$(".detail-kelas .detail-dt-kelas").text("-"),$("#box-kelas-mhs input[name=c_kelas]").val(""),getJSON_async("http://"+host+path_home+"/action/ambil",{kelas:a,data:"daftar_nilai_mhs"},500,!0).then(function(a){if(""!=a.record_kelas)if($("#box-kelas-mhs .box-body").is(":visible")?($("#box-kelas-mhs").find("div.overlay").fadeIn(),delay(function(){$("#box-kelas-mhs").find("div.overlay").fadeOut(),$("html, body").animate({scrollTop:$("#box-kelas-mhs").offset().top-55},800)},500)):($("#box-kelas-mhs").fadeIn(),collapse_box("#box-kelas-mhs"),delay(function(){$("#box-kelas-mhs").find("div.overlay").fadeOut(),$("html, body").animate({scrollTop:$("#box-kelas-mhs").offset().top-55},800)},100)),$.each(a.record_kelas,function(a,t){$.each(t,function(a,t){null!=t&&""!=t||(t="-"),$(".detail-kelas .detail-kelas-"+a).text(t)}),0!=t.jenis_jdl&&$(".detail-kelas .detail-kelas-nama_mk").text(t.nama_mk+" (Konsentrasi "+t.nm_konsentrasi+")")}),""!=a.record_mhs){1==a.input?($(".view-nilai").removeClass("btn-warning btn-info").addClass("btn-info"),$(".view-nilai").find("i").removeClass("fa-circle-o-notch fa-spin fa-list").addClass("fa-pencil-square"),$(".btn-input-nilai").parent(".row-input").show(),$(".btn-input-nilai").html('<button id="update-nilai" class="btn btn-info"><i class="fa fa-pencil-square"></i> Input Nilai</button>').attr("id","add-nilai"),$.each(a.record_mhs,function(a,t){if(""!=t.nilai_akhir)return $(".btn-input-nilai").html('<button id="update-nilai" class="btn btn-success"><i class="fa fa-pencil-square"></i> Update Nilai</button>').attr("id","up-nilai")}),$("#box-kelas-mhs input[name=c_kelas]").val(a.record_kelas[0].jdl_i)):($(".view-nilai").removeClass("btn-warning btn-info").addClass("btn-warning"),$(".view-nilai").find("i").removeClass("fa-circle-o-notch fa-spin fa-pencil-square").addClass("fa-list"),$(".btn-input-nilai").text(""),$(".btn-input-nilai").parent(".row-input").hide()),$(".tbl-daftar-kelas-mhs").find("tbody").text("");var t,e,l=1;$.each(a.record_mhs,function(s,i){""!=i.nilai_akhir?1==a.input?(t='<span class="pdk-nilai">'+i.nilai_akhir+'</span><input type="number" name="nilai_akhir[]" value="'+i.nilai_akhir+'" style="width:100%;display:none"><input type="hidden" name="id_kls_nilai[]" value="'+i.id_kelas+'">',e=i.pdk):(t=i.nilai_akhir,e=i.pdk):1==a.input?(t='<span class="pdk-nilai">-</span><input type="number" name="nilai_akhir[]" value="" style="width:100%;display:none"><input type="hidden" name="id_kls_nilai[]" value="'+i.id_kelas+'">',e="-"):(t="-",e="-"),$("table.tbl-daftar-kelas-mhs").find("tbody").append('<tr>  <td class="text-center">'+l+'</td>  <td class="text-center">'+i.nisn+"</td>  <td>"+i.nama+'</td>  <td class="text-center input-nilai">'+t+'</td>  <td class="text-center pdk-nilai">'+e+"</td></tr>"),l++})}else $(".tbl-daftar-kelas-mhs").find("tbody").html('<tr><td colspan="5" align="center">Untuk sekarang kelas ini belum memiliki mahasiswa</td></tr>');else swal({title:"Info",text:"Kelas yang anda pilih tidak terdaftar dalam database!",type:"info",timer:2e3})}).catch(function(a){$(".view-nilai").find("i").removeClass("fa-circle-o-notch fa-spin fa-pencil-square").addClass("fa-list")})}function detail_data_ptk(){0==$(".tbl-pend-ptk tr.table-load").length&&$(".tbl-pend-ptk").find("tbody").append('<tr class="table-load"><td class="text-center load-data" colspan="5">Memproses Data</td></tr>'),0==$(".tbl-riwayat-ptk tr.table-load").length&&$(".tbl-riwayat-ptk").find("tbody").append('<tr class="table-load"><td class="text-center load-data" colspan="6">Memproses Data</td></tr>'),0==$(".tbl-penelitian-ptk tr.table-load").length&&$(".tbl-penelitian-ptk").find("tbody").append('<tr class="table-load"><td class="text-center load-data" colspan="4">Memproses Data</td></tr>'),getJSON_async("http://"+host+controller_path+"/action/ambil",{data:"detail_data_ptk"},1e3).then(function(a){if(""!=a.studi_ptk){$(".profil-rwt-pendidikan-ptk").text(a.studi_ptk.length),$(".tbl-pend-ptk").find("tbody").text("");t=1;$.each(a.studi_ptk,function(a,e){$(".tbl-pend-ptk").find("tbody").append('<tr>  <td class="text-center">'+t+"</td>  <td>"+e.nama_pt_studi+'</td>  <td class="text-center">'+e.gelar_ak_ptk+'</td>  <td class="text-center">'+e.tgl_ijazah_ptk+'</td>  <td class="text-center">'+e.jenjang_studi_ptk+"</td></tr>"),t++})}else $(".tbl-pend-ptk").find("tbody").html('<tr>  <td colspan="5" align="center">Untuk saat ini, anda ini belum memiliki riwayat pendidikan</td></tr>');if(""!=a.riwayat_mengajar){$(".profil-rwt-mengajar-ptk").text(a.riwayat_mengajar.length),$(".tbl-riwayat-ptk").find("tbody").text("");t=1;$.each(a.riwayat_mengajar,function(a,e){$(".tbl-riwayat-ptk").find("tbody").append('<tr>  <td class="text-center">'+t+'</td>  <td class="text-center">'+e.thn_ajaran_jdl+'</td>  <td class="text-center">'+e.kode_mk+"</td>  <td>"+e.nama_mk+'</td>  <td class="text-center">'+e.kelas+"</td>  <td>"+e.nama_prodi+"</td></tr>"),t++})}else $(".tbl-riwayat-ptk").find("tbody").html('<tr>  <td colspan="6" align="center">Untuk saat ini, anda ini belum memiliki riwayat mengajar</td></tr>');if(""!=a.penelitian_ptk){$(".profil-rwt-penelitian-ptk").text(a.penelitian_ptk.length),$(".tbl-penelitian-ptk").find("tbody").text("");var t=1;$.each(a.penelitian_ptk,function(a,e){$(".tbl-penelitian-ptk").find("tbody").append('<tr>  <td class="text-center">'+t+"</td>  <td>"+e.judul_penelitian+'</td>  <td class="text-center">'+e.bidang_ilmu+"</td>  <td>"+e.lembaga+"</td></tr>"),t++})}else $(".tbl-penelitian-ptk").find("tbody").html('<tr>  <td colspan="4" align="center">Untuk saat ini, anda ini belum memiliki riwayat penelitian</td></tr>')}).catch(function(a){1==$(".tbl-pend-ptk tr.table-load").length&&$(".tbl-pend-ptk tr.table-load td").html("Terjadi kesalahan, <b>Error "+a.status+": "+a.statusText+"</b>"),1==$(".tbl-riwayat-ptk tr.table-load").length&&$(".tbl-riwayat-ptk tr.table-load td").html("Terjadi kesalahan, <b>Error "+a.status+": "+a.statusText+"</b>"),1==$(".tbl-penelitian-ptk tr.table-load").length&&$(".tbl-penelitian-ptk tr.table-load td").html("Terjadi kesalahan, <b>Error "+a.status+": "+a.statusText+"</b>"),setTimeout(function(){$(".tbl-pend-ptk tr.table-load, .tbl-riwayat-ptk tr.table-load, .tbl-penelitian-ptk tr.table-load").remove()},2e3)})}function chart_ptk(a){var t=$("#pieChart-data-ptk").get(0).getContext("2d"),e={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>',tooltipTemplate:"<%=label%> : <%=value %> Orang"};new Chart(t).Pie(a,e)}var path=window.location.pathname,host=window.location.hostname,delay=function(){var a=0;return function(t,e){clearTimeout(a),a=setTimeout(t,e)}}();if(path==beranda_mhs_path+"/data_mhs"||path==beranda_mhs_path+"/data_jadwal"||path==beranda_mhs_path+"/nilai_mhs")var controller_path=beranda_mhs_path;else if(path==beranda_ptk_path+"/data_tenaga_pendidik"||path==beranda_ptk_path+"/jadwal_mengajar"||path==beranda_ptk_path+"/nilai_mhs")var controller_path=beranda_ptk_path;$(function(){path==controller_path+"/data_tenaga_pendidik"&&getJSON_async("http://"+host+controller_path+"/action/ambil",{data:"data_tenaga_pendidik"},null,!0).then(function(a){""!=a.record_ptk?($.each(a.record_ptk,function(a,t){$.each(t,function(a,t){""!=t&&"0"!=t||(t="-"),"jk_ptk"==a&&"L"==t?t="Laki - Laki":"jk_ptk"==a&&"P"==t&&(t="Perempuan"),$(".box-profile .profil-"+a).text(t),$("#detail-"+a).text(t)})}),detail_data_ptk()):$("#detail-ptk dl dd").text("-")}).catch(function(a){}),path==controller_path+"/nilai_mhs"&&($("#box-content div.overlay, #box-nilai div.overlay").fadeOut(),daftar_kls_d()),path==controller_path+"/jadwal_mengajar"&&($("#box-jadwal div.overlay").fadeOut(),daftar_jadwal()),$("#box-jadwal .refresh-data-ptk").on("click",function(){var a=$(this).find("i");a.addClass("fa-spin"),setTimeout(function(){a.removeClass("fa-spin")},1050),daftar_jadwal(!0)}),$(".tamp-jadwal").on("click",function(a){a.preventDefault();var t=$(".select2_jadwal").val();$(this).find("i").removeClass("fa-list").addClass("fa-circle-o-notch fa-spin"),daftar_jadwal(!1,t)}),$(".tamp-all-jadwal").on("click",function(a){a.preventDefault();var t=$(".select2_jadwal").val();$(this).find("i").removeClass("fa-list").addClass("fa-circle-o-notch fa-spin"),daftar_jadwal(!1,t,!0)}),$(document).on("click",".view-kelas",function(){$(this).find("i").removeClass("fa-list").addClass("fa-circle-o-notch fa-spin"),daftar_kelas_mhs($(this).val())}),$(document).on("click",".remove-kelas",function(){delay(function(){$(".detail-kelas .detail-dt-kelas").text("-"),$(".tbl-daftar-kelas-mhs").find("tbody").html('<tr><td colspan="6" align="center">Silahkan pilih kelas</td></tr>')},1e3)}),$(".tamp-kls").on("click",function(a){a.preventDefault(),$(this).find("i").removeClass("fa-list").addClass("fa-circle-o-notch fa-spin"),daftar_kls_d($(".select2_jadwal").val())}),$(document).on("click",".view-nilai",function(){$(this).find("i").removeClass("fa-list fa-pencil-square").addClass("fa-circle-o-notch fa-spin"),view_nilai($(this).val())}),$("#refresh-statik-ptk").on("click",function(){collapse_box(".grafik-ptk"),$(this).find("i").addClass("fa-spin"),delay(function(){$(".grafik-ptk .fa-refresh").removeClass("fa-spin")},1e3),getJSON_async("http://"+host+path_home+"/action/ambil",{data:"ptk"},null,!0).then(function(a){$("#pieChart-data-ptk").replaceWith('<canvas id="pieChart-data-ptk" height="180"></canvas>'),chart_ptk(a.canvas),a.pd.length>4?$(".grafik-ptk ul.daftar-pd").css("height","163px"):$(".grafik-ptk ul.daftar-pd").css("height",""),$(".grafik-ptk ul.daftar-pd").text(""),$.each(a.pd,function(a,t){$(".grafik-ptk ul.daftar-pd").append("<li><a>"+t.nama_prodi+" ("+t.jenjang_prodi+')<span class="pull-right badge" style="background-color:'+t.color_detail+'">'+t.statik_ptk+"%</span></a></li>")})}).catch(function(a){})}),$(document).on("click","#update-nilai",function(){$(".tbl-daftar-kelas-mhs .pdk-nilai").hide(),$("#form-input").attr("action","tambah"),$(".btn-input-nilai").html('<button id="submit" class="btn btn-info"><i class="fa fa-save"></i> Simpan</button> <button id="cancel-input-nilai" class="btn btn-danger"><i class="fa fa-times"></i> Batal</button>'),$(".tbl-daftar-kelas-mhs input[type=number]").show()}),$(document).on("click","#cancel-input-nilai",function(){$(".tbl-daftar-kelas-mhs .pdk-nilai").show(),"add-nilai"==$(".btn-input-nilai").attr("id")?$(".btn-input-nilai").html('<button id="update-nilai" class="btn btn-info"><i class="fa fa-pencil-square"></i> Input Nilai</button>'):"up-nilai"==$(".btn-input-nilai").attr("id")&&$(".btn-input-nilai").html('<button id="update-nilai" class="btn btn-success"><i class="fa fa-pencil-square"></i> Update Nilai</button>'),$("#form-input").attr("action",""),$(".tbl-daftar-kelas-mhs input[type=number]").hide()}),$(document).on("change",".check-status-mhs-kls",function(){var a=$(this).prop("checked"),t=$(this).attr("value");getJSON_async("http://"+host+controller_path+"/action/update_status",{id:t,status_mhs_kls:a},null,!0).then(function(e){"success"!=e.status&&("failed"==e.status?swal({title:"Error",text:"Gagal merubah status aktif mahasiswa",type:"error",timer:2e3}):"failed_thn"==e.status&&swal({title:"Error",text:"Gagal merubah status aktif mahasiswa karena tahun akademik kelas ini ditutup",type:"error",timer:2e3}),1==a?delay(function(){$(".status-mhs-"+t).bootstrapToggle("destroy"),$(".status-mhs-"+t).replaceWith("<input type='checkbox' class='check-status-mhs-kls status-mhs-"+t+"' value='"+t+"'/>"),$(".status-mhs-"+t).bootstrapToggle({on:'<i class="fa fa-check-circle"></i> Aktif',off:'<i class="fa fa-ban"></i> Tidak Aktif',size:"small",onstyle:"success",offstyle:"danger"})},500):delay(function(){$(".status-mhs-"+t).bootstrapToggle("destroy"),$(".status-mhs-"+t).replaceWith("<input type='checkbox' class='check-status-mhs-kls status-mhs-"+t+"' checked value='"+t+"'/>"),$(".status-mhs-"+t).bootstrapToggle({on:'<i class="fa fa-check-circle"></i> Aktif',off:'<i class="fa fa-ban"></i> Tidak Aktif',size:"small",onstyle:"success",offstyle:"danger"})},500))}).catch(function(e){swal({title:"Error",text:"Gagal merubah status aktif mahasiswa",type:"error",timer:2e3}),1==a?delay(function(){$(".status-mhs-"+t).bootstrapToggle("destroy"),$(".status-mhs-"+t).replaceWith("<input type='checkbox' class='check-status-mhs-kls status-mhs-"+t+"' value='"+t+"'/>"),$(".status-mhs-"+t).bootstrapToggle({on:'<i class="fa fa-check-circle"></i> Aktif',off:'<i class="fa fa-ban"></i> Tidak Aktif',size:"small",onstyle:"success",offstyle:"danger"})},500):delay(function(){$(".status-mhs-"+t).bootstrapToggle("destroy"),$(".status-mhs-"+t).replaceWith("<input type='checkbox' class='check-status-mhs-kls status-mhs-"+t+"' checked value='"+t+"'/>"),$(".status-mhs-"+t).bootstrapToggle({on:'<i class="fa fa-check-circle"></i> Aktif',off:'<i class="fa fa-ban"></i> Tidak Aktif',size:"small",onstyle:"success",offstyle:"danger"})},500)})}),$(document).on("click","#submit",function(a){a.preventDefault(),$("#form-input").find(".has-error").removeClass("has-error");var t=$("#form-input").attr("action"),e=$("#form-input").serialize();$("#alert-place").text("");$("#form-input input[name=data]").val(),getUrlVars();$.ajax("http://"+host+controller_path+"/action/"+t,{dataType:"json",type:"POST",data:e,success:function(a){if("tambah"==t)if("success"==a.status)"nilai_mhs"==a.data&&view_nilai(a.kls),swal({title:"Data Berhasil Disimpan",type:"success",timer:1e3});else if("failed"==a.status){var e="";$.each(a.errors,function(a,t){e+='<li class="text-center">'+t+"</li>"}),swal({title:"Gagal!",type:"error",html:e})}else swal({title:"Terjadi Error",type:"error"})},error:function(){swal({title:"Error",text:"Maaf, telah terjadi error pada server!",type:"error",timer:2e3})}})})});