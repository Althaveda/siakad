/*SIAKAD UNCP Js Config*/
/*==========================================*/
/*Dev		=> Muhammad Dicky Hidayat Latif*/
/*Email		=> muh.dickyhidayat@gmail.com*/
/*==========================================*/

function getJSON(a,t){return void 0!=t?t.csrf_key=token:t={csrf_key:token},JSON.parse($.ajax({type:"POST",url:a,data:t,dataType:"json",global:!1,async:!1,success:function(a){token=a.n_token},error:function(){window.history.pushState(null,null,path),t.status_mhs_kls&&(1==t.status_mhs_kls?delay(function(){$(".status-mhs-"+t.id).bootstrapToggle("destroy"),$(".status-mhs-"+t.id).replaceWith("<input type='checkbox' class='check-status-mhs-kls status-mhs-"+t.id+"' value='"+t.id+"'/>"),$(".status-mhs-"+t.id).bootstrapToggle({on:'<i class="fa fa-check-circle"></i> Aktif',off:'<i class="fa fa-ban"></i> Tidak Aktif',size:"small",onstyle:"success",offstyle:"danger"})},500):delay(function(){$(".status-mhs-"+t.id).bootstrapToggle("destroy"),$(".status-mhs-"+t.id).replaceWith("<input type='checkbox' class='check-status-mhs-kls status-mhs-"+t.id+"' checked value='"+t.id+"'/>"),$(".status-mhs-"+t.id).bootstrapToggle({on:'<i class="fa fa-check-circle"></i> Aktif',off:'<i class="fa fa-ban"></i> Tidak Aktif',size:"small",onstyle:"success",offstyle:"danger"})},500)),swal({title:"Error",text:"Maaf, telah terjadi error pada server!",type:"error",timer:2e3})}}).responseText)}function getJSON_async(a,t,e,s){return void 0!=t?t.csrf_key=token:t={csrf_key:token},new Promise(function(o,n){$.ajax({type:"POST",url:a,data:t,dataType:"json",beforeSend:function(a,t){clearInterval(load_interval);var e=0;load_interval=setInterval(function(){$(".load-data").append(". "),4==++e&&($(".load-data").html("Memproses Data"),e=0)},400)},complete:function(a,t){if(200==a.status&&"success"==t){var s=a.responseJSON;token=s.n_token,setTimeout(function(){$(".modal .load-data").replaceWith(""),clearInterval(load_interval),null==s.login_rld?o(s):(s.status="0",s.statusText="Session anda telah berakhir dan telah direset kembali!",n(s))},e)}},error:function(a,t,e){500==a.status?console.log("Error "+a.status+" = "+a.statusText):200==a.status?(a.statusText="Parser Error",console.log("Error "+a.status+" = "+a.statusText)):0==a.status?(a.statusText="No Respon From Server",console.log("Error "+a.status+" = "+a.statusText)):console.log("status = "+t),n(a),$(".modal .load-data").replaceWith(""),clearInterval(load_interval),1==s&&swal({title:"Error",html:'Maaf, terjadi kesalahan!<p style="text-align:right;"><a href="" class="show-error">Show Error</a></p><div style="font-family:Segoe UI;text-align: center;display:none" class="error-detail">Error '+a.status+": "+a.statusText+"</div>",type:"error",confirmButtonText:'<i class="fa fa-check"></i> Ok'})}})})}function getUrlVars(){for(var a,t=[],e=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<e.length;s++)a=e[s].split("="),t.push(a[0]),t[a[0]]=a[1];return t}function check_all(){$(".data_action").attr("checked",!0)}function modal_animated(a){var a=$("#myModal .modal-dialog, #myModal-sekolah .modal-dialog").attr("class","modal-dialog "+a+" animated")}function collapse(a){var t=$(a),e=t.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");t.hasClass("collapsed-box")?(t.find("i").removeClass("fa fa-plus").addClass("fa fa-minus"),e.slideDown(450,function(){t.removeClass("collapsed-box")})):(t.find("i").removeClass("fa fa-minus").addClass("fa fa-plus"),e.slideUp(450,function(){t.addClass("collapsed-box")}))}function collapse_box(a){var t=$(a),e=t.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");t.find(".box-header .fa-plus").removeClass("fa fa-plus").addClass("fa fa-minus"),e.slideDown(450,function(){t.removeClass("collapsed-box")})}var path=window.location.pathname,host=window.location.hostname,vars=user_last_online.split("/"),load_interval,delay=function(){var a=0;return function(t,e){clearTimeout(a),a=setTimeout(t,e)}}();if(path==beranda_mhs_path+"/data_mhs"||path==beranda_mhs_path+"/data_jadwal"||path==beranda_mhs_path+"/nilai_mhs")var controller_path=beranda_mhs_path;else if(path==beranda_ptk_path+"/data_tenaga_pendidik"||path==beranda_ptk_path+"/jadwal_mengajar"||path==beranda_ptk_path+"/nilai_mhs")var controller_path=beranda_ptk_path;$(function(){$(document).ajaxSend(function(a,t,e){e.data.search("csrf_key=")<0&&(e.data=e.data+"&csrf_key="+token)}),$(".control-panel-data").mousewheel(function(a,t){a.preventDefault(),this.scrollLeft-=40*t}),$(window).resize(function(){$(window).width()>980&&($(".box-profile .profil-kompetensi").text().length>20&&$(".box-profile .profil-kompetensi").removeClass("pull-right").css("margin-bottom","0px"),$(".box-profile .profil-jenjang").text().length>12&&$(".box-profile .profil-jenjang").removeClass("pull-right").css("margin-bottom","0px"),$(".box-profile .profil-kelas-didik").text().length>22&&$(".box-profile .profil-kelas-didik").removeClass("pull-right").css("margin-bottom","0px")),$(window).width()>1062&&$(".box-profile .profil-jenjang").addClass("pull-right"),($(window).width()<=1062||$(window).width()<=1342)&&$(".box-profile .profil-jenjang").removeClass("pull-right").css("margin-bottom","0px"),$(window).width()<=980&&($(".box-profile .profil-kompetensi").addClass("pull-right"),$(".box-profile .profil-jenjang").addClass("pull-right"),$(".box-profile .profil-kelas-didik").addClass("pull-right")),$(window).width()}),moment.locale("id"),$("#user-widget-detail small").text("Terakhir kali login "+moment(vars[0]).fromNow()),$("#tab_info_akun .detail-nidn,#tab_info_akun .detail-nim").text(moment(vars[0]).fromNow()),path!=index_path&&path!=index_path+"/"||("ptk"==vars[1]?Pace.once("done",function(){daftar_jadwal(!0),getJSON_async("http://"+host+path_home+"/action/ambil",{data:"ptk"}).then(function(a){chart_ptk(a.canvas),a.pd.length>4?$(".grafik-ptk ul.daftar-pd").css("height","163px"):$(".grafik-ptk ul.daftar-pd").css("height",""),$(".grafik-ptk ul.daftar-pd").text(""),$.each(a.pd,function(a,t){$(".grafik-ptk ul.daftar-pd").append("<li><a>"+t.nama_prodi+" ("+t.jenjang_prodi+')<span class="pull-right badge" style="background-color:'+t.color_detail+'">'+t.statik_ptk+"%</span></a></li>")})}).catch(function(a){})}):"mhs"==vars[1]&&daftar_jadwal_mhs(!0)),path==path_profil_pt&&($("#tab-identitas-pt .detail-data-pt").text("-"),getJSON_async("http://"+host+path_home+"/action/ambil",{data:"data_identitas_pt"},500).then(function(a){if(""==a.data?$("#tab-identitas-pt .detail-data-pt").text("-"):$.each(a.data,function(a,t){$.each(t,function(a,t){""==t&&(t="-"),"website"==a&&$("#tab-identitas-pt ."+a).parents().attr("href","http://"+t),"rt"!=a&&"rw"!=a||$("#tab-identitas-pt ."+a).text(t),$("#tab-identitas-pt .detail-data-pt."+a).text(t)})}),""==a.prodi?$("#tab-identitas-pt #prodi .dl-horizontal dd").text("-"):$.each(a.prodi,function(a,t){$.each(t,function(a,t){""!=t&&"0000-00-00"!=t||(t="-"),$("#tab-identitas-pt #prodi span."+a).text(t+" Orang"),$("#tab-identitas-pt #prodi dd."+a).text(t)})}),""==a.konsentrasi)$("#tab-identitas-pt #prodi .kons-pd-box").hide(),$("#tab-identitas-pt #prodi .tbl-data-konst-pd").find("tbody").html('<tr><td colspan="2">Program studi saat ini tidak memiliki konsentrasi</td></tr>');else{$("#tab-identitas-pt #prodi .kons-pd-box").show(),$("#tab-identitas-pt #prodi .tbl-data-konst-pd").find("tbody").html("");var t=1;$.each(a.konsentrasi,function(a,e){$("#tab-identitas-pt #prodi .tbl-data-konst-pd").find("tbody").append('<tr><td class="text-center">'+t+"</td><td>"+e.nm_konsentrasi+"</td></tr>"),t++})}}).catch(function(a){})),$(window).hashchange(function(){var a=$.param.fragment();if(0==a.search("tambah")){if(path.search("beranda_ptk/nilai_mhs")>0){var t=getUrlVars().kelas,e=getUrlVars().mata_pelajaran;$("#form-input").show(),$("#myModal .modal-title").text("Input Nilai Siswa"),$("#myModal #form-input input[name=kelas]").val(t),$("#myModal #form-input input[name=mata_pelajaran]").val(e),$("#myModal #form-input .input-nilai-ket").html("Input nilai siswa pada kelas&nbsp<strong>"+t+"</strong>&nbspdengan mata pelajaran&nbsp<strong>"+e+"</strong>&nbsp!")}modal_animated("zoomIn"),$("#myModal #form-input").attr("action","tambah"),$("#myModal #submit").text("Input Nilai"),$(".modal").addClass("modal-info"),$("#myModal").modal("show")}else"tampilkan"==a&&(path==beranda_mhs_path+"/nilai_mhs"&&$("#myModal #form-ambil-nilai").show(),modal_animated("zoomIn"),$("#myModal #form-input").attr("action","ambil"),$("#myModal #submit").text("Tampilkan Nilai"),$(".modal").addClass("modal-success"),$("#myModal").modal("show"))}),$(window).trigger("hashchange"),$("#myModal, #myModal-sekolah").on("show.bs.modal",function(a){$("body").addClass("modal-show")}),$("#myModal").on("hidden.bs.modal",function(a){modal_animated("zoomOutDown"),window.history.pushState(null,null,path),$("#myModal form").hide(),$("#rincian-siswa").hide(),$("#submit").show(),$("#batal").text("Batal"),$("#myModal #tamp-data, #myModal #delete-selected, #myModal #pindah-kelas").attr("id","submit"),$(".timepicker").val("14:08"),$(".modal").removeClass("modal-info"),$(".modal").removeClass("modal-success"),$(".modal").removeClass("modal-danger"),$(".modal").removeClass("modal-primary"),$(".modal").removeClass("modal-warning"),$("#myModal #form-input").find("input[type=text],input[type=number],input[type=email]").val(""),$('input[type="radio"]').iCheck("uncheck"),$("#myModal select.select2_thn_angkatan, #myModal select.select2_kelas, #myModal select#select2_wali_kelas").text(""),$("#myModal .select2").val(null).trigger("change"),$("#myModal .select2").prop("disabled",!1),$("#myModal").find(".has-error").removeClass("has-error"),$("#alert-place").text(""),$("#myModal #form-input .tab_ortu, #myModal #form-input .tab_wali").removeClass("active"),$("#myModal #tab_ortu, #myModal #tab_wali").removeClass("active"),$("#form-input .tab_ortu, #form-input .tab_wali").find("a").attr("aria-expanded","false"),$("#form-input .tab_siswa").addClass("active"),$("#form-input .tab_siswa").find("a").attr("aria-expanded","true"),$("#form-input #tab_siswa").addClass("active"),$("#myModal .modal-dialog").removeClass("modal-lg"),$("#myModal .data-message").hide(),$("#myModal .data-message .content-message").addClass("centered-content"),$("#myModal .data-message .content-message").html("Maaf, data yang anda cari tidak ditemukan")}),$("#myModal").on("hide.bs.modal",function(a){modal_animated("zoomOutDown"),$(".overflow-tab").scrollTop(0)}),$(".select2_jadwal").select2({placeholder:"Pilih tahun akademik",ajax:{url:"http://"+host+path_home+"/action/ambil",type:"post",dataType:"json",delay:450,data:function(a){return{value:a.term,page:a.page,data:"daftar_thn_ajaran",csrf_key:token}},processResults:function(a,t){return t.page=t.page||1,{results:a.jadwal}}},minimumInputLength:1,language:"id",allowClear:!0,templateResult:function(a){if(a.loading)return a.text;var t=a.thn_ajaran_jdl.split("/"),e=t[0];if("1"==t[1])s="Ganjil";else var s="Genap";var o=$("<p style='margin-bottom:0px'>"+e+"/"+s+" "+a.nama_prodi+" ("+a.jenjang_prodi+")</p>");return void 0!=a.text?o:void 0}}),$(document).on("click",".show-about",function(a){a.preventDefault(),$("#about").modal("show")}),$(".refresh-data").on("click",function(a){a.preventDefault(),$(this).find("i").addClass("fa-spin"),path==path_profil_pt&&"data-identitas-pt"==$(this).attr("data-refresh")&&($("#tab-identitas-pt #prodi .tbl-data-konst-pd").find("tbody").prepend('<tr class="load-row"><td colspan="2" class="load-data text-center">Memproses Data</td></tr>'),getJSON_async("http://"+host+path_home+"/action/ambil",{data:"data_identitas_pt"},500).then(function(a){if(""==a.data?$("#tab-identitas-pt .detail-data-pt").text("-"):$.each(a.data,function(a,t){$.each(t,function(a,t){""==t&&(t="-"),"website"==a&&$("#tab-identitas-pt ."+a).parents().attr("href","http://"+t),"rt"!=a&&"rw"!=a||$("#tab-identitas-pt ."+a).text(t),$("#tab-identitas-pt .detail-data-pt."+a).text(t)})}),""==a.prodi?$("#tab-identitas-pt #prodi .dl-horizontal dd").text("-"):$.each(a.prodi,function(a,t){$.each(t,function(a,t){""!=t&&"0000-00-00"!=t||(t="-"),$("#tab-identitas-pt #prodi span."+a).text(t+" Orang"),$("#tab-identitas-pt #prodi dd."+a).text(t)})}),""==a.konsentrasi)$("#tab-identitas-pt #prodi .kons-pd-box").hide(),$("#tab-identitas-pt #prodi .tbl-data-konst-pd").find("tbody").html('<tr><td colspan="2" class="text-center">Program studi saat ini tidak memiliki konsentrasi</td></tr>');else{$("#tab-identitas-pt #prodi .kons-pd-box").show(),$("#tab-identitas-pt #prodi .tbl-data-konst-pd").find("tbody").html("");var t=1;$.each(a.konsentrasi,function(a,e){$("#tab-identitas-pt #prodi .tbl-data-konst-pd").find("tbody").append('<tr><td class="text-center">'+t+"</td><td>"+e.nm_konsentrasi+"</td></tr>"),t++})}}).catch(function(a){})),delay(function(){$(".refresh-icon").removeClass("fa-spin")},1e3)}),$(".verifikasi-data").on("click",function(a){a.preventDefault(),swal({type:"info",title:"Peringatan",text:"Jika anda melakukan verifikasi data, maka data anda akan dinyatakan valid.",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check"></i> Verifikasi Data',cancelButtonText:'<i class="fa fa-times"></i> Batal'}).then(function(){swal({title:"Data Terverifikasi",type:"success",timer:2e3}),delay(function(){window.location.href="http://"+host+controller_path+"/verifikasi_data/true"},500)})}),$(".verifikasi-salah").on("click",function(a){a.preventDefault(),swal({type:"info",title:"Peringatan",text:"Apakah anda yakin data ini masih terdapat data yang tidak valid?.",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check"></i> Iya',cancelButtonText:'<i class="fa fa-times"></i> Batal'}).then(function(){swal({title:"Verifikasi Data Diteruskan Ke Admin",type:"success",timer:2e3}),delay(function(){window.location.href="http://"+host+controller_path+"/verifikasi_data/false"},500)})}),$("#change-pass").on("click",function(a){a.preventDefault();var t=$(".old-password").val(),e=$(".new-password").val(),s=$(".renew-password").val(),o=$(this).find("i");$("#old-password,#new-password,#renew-password").removeClass("has-error"),""!=t&&""!=e&&""!=s?(o.removeClass("fa-key").addClass("fa-circle-o-notch fa-spin"),getJSON_async("http://"+host+path_home+"/action/change_password",{new_password:e,renew_password:s,old_password:t},500,!0).then(function(a){"success"==a.status?(swal({type:"success",title:"Status Password",text:"Password berhasil diganti"}),$(".old-password,.new-password,.renew-password").val("")):"failed_db"==a.status?swal({type:"error",title:"Kesalahan",text:"Terjadi kesalahan dalam memperbahrui password"}):a.errors.old_password?(swal({type:"error",title:"Kesalahan",text:a.errors.old_password}),$(".old-password,.new-password,.renew-password").val(""),$("#old-password").addClass("has-error")):a.errors.new_password?(swal({type:"error",title:"Kesalahan",text:a.errors.new_password}),$("#new-password,#renew-password").addClass("has-error")):(swal({type:"error",title:"Kesalahan",text:a.errors.renew_password}),$("#renew-password").addClass("has-error")),o.removeClass("fa-circle-o-notch fa-spin").addClass("fa-key")}).catch(function(a){o.removeClass("fa-circle-o-notch fa-spin").addClass("fa-key")})):swal({type:"error",title:"Kesalahan",text:"Masukkan data password dengan lengkap"})}),$(document).on("click",".show-error",function(a){a.preventDefault(),$(".error-detail").show(),$(".show-error").text("Hide Error").removeClass("show-error").addClass("hide-error")}),$(document).on("click",".hide-error",function(a){a.preventDefault(),$(".error-detail").hide(),$(".hide-error").text("Show Error").removeClass("hide-error").addClass("show-error")}),$("#box-jadwal .select2_jadwal, #box-nilai .select2_jadwal").on("change",function(){null!=$(this).val()?$(".tamp-jadwal, .tamp-all-jadwal, .tamp-nilai").removeClass("disabled"):$(".tamp-jadwal, .tamp-all-jadwal, .tamp-nilai").addClass("disabled")}),$("#box-content .select2_jadwal").on("change",function(){null!=$(this).val()?$(".tamp-kls").removeClass("disabled"):$(".tamp-kls").addClass("disabled")}),$(document).ajaxSuccess(function(a,t){token=t.responseJSON.n_token})});